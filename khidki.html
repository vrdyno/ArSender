connection.onmessage = function(event) {

    var urlPacket=JSON.parse(event.data);
    var Packet=JSON.parse(event.data);

//
 
    //draw(event.data);



if(urlPacket.url){
    if(urlPacket.url != dicomUrl){

                   // console.log("url new  "+urlPacket.id+" - "+urlPacket.url);
                 dicomUrl=urlPacket.url;
                drawImageDicom();
}
}
///dicome size data respnce

if(urlPacket.maxDicom){
   

                dicomFullScreenRemote();
                urlPacket.maxDicom=false;

  // console.log("agaun-onmsg maxDicom");
}
 


//videoscreen size data response
if(urlPacket.max){
   

                fullscreenRemote();
                urlPacket.max=false;

 }
if(urlPacket.min){
   

                cancelfullscreenRemote();
                urlPacket.min=false;
 
}


handEvent=event;

       if (event.extra.userid == "doctor") {
       if(flagopen){
        var remotepacket=JSON.parse(handEvent.data);


    if (remotepacket.id=="drawing") {
        var posdraw= [ ];
posdraw[0]=remotepacket.position.x;
posdraw[1]=remotepacket.position.y;

        drawRemoteCircle(posdraw);

      }
      else{

           drawFullHand(Packet);

      }
}
}
 };
